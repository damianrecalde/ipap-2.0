{% extends 'layouts/base.html.twig' %}

{% block title %}{{ page_title }}{% endblock %}

{% block body %}
    {% for flash_error in app.flashes('verify_email_error') %}
        <div class="alert alert-danger" role="alert">{{ flash_error }}</div>
    {% endfor %}

    <!-- Formulario de registro de usuario -->
    <section class="py-1 bg-blueGray-50">
        <div class="container mx-auto px-4">
            <div class="bg-white shadow-2xl mt-20 pt-10 rounded-lg">
            <div class="grid grid-cols-1 md:grid-cols-3">
                <!-- Cursos, Certificados, Créditos -->
                <div class="grid grid-cols-3 text-center order-last md:order-first mt-20 md:mt-0">
                <div>
                    <p class="font-bold text-orange-600 text-xl"></p>
                    <p class="text-gray-400">Cursos</p>
                </div>
                <div>
                    <p class="font-bold text-orange-600 text-xl"></p>
                    <p class="text-gray-400">Certificados</p>
                </div>
                <div>
                    <p class="font-bold text-orange-600 text-xl"></p>
                    <p class="text-gray-400">Créditos</p>
                </div>
                </div>

                <!-- Imagen de Perfil -->
                <div class="relative">
                <div class="w-48 h-48 bg-indigo-100 mx-auto rounded-full shadow-2xl absolute inset-x-0 top-0 -mt-24 flex items-center justify-center text-indigo-500 overflow-hidden">
                    {% if user.imageProfile %}
                    <img src="{{ asset('uploads/' ~ user.imageProfile) }}" alt="Foto de perfil" class="rounded-full object-cover w-48 h-48 border-4 border-white shadow-md">
                    {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24 text-indigo-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zM3 18a7 7 0 0114 0H3z" clip-rule="evenodd" />
                    </svg>
                    {% endif %}
                </div>
                </div>

                <!-- Tickets -->
                <div class="grid grid-cols-3 text-center mt-20 md:mt-0">
                <div>
                    <p class="font-bold text-red-700 text-xl"></p>
                    <p class="text-gray-400">Tickets pendientes</p>
                </div>
                <div>
                    <p class="font-bold text-blue-700 text-xl"></p>
                    <p class="text-gray-400">En proceso</p>
                </div>
                <div>
                    <p class="font-bold text-green-700 text-xl"></p>
                    <p class="text-gray-400">Resueltos</p>
                </div>
                </div>
            </div>

            <!-- Información del usuario -->
            <div class="mt-24 text-center border-b mx-4 pb-12">
                <h1 class="text-4xl font-medium text-gray-700">{{ user.firstname }} {{ user.lastname }}</h1>
                <p class="font-light text-gray-600 mt-3">{{ user.email }}</p>
                <p class="font-light text-gray-600 mt-1">{{ user.dni }}</p>

                <p class="mt-8 text-gray-500">Integrante de equipo - {#{ user.workTeams }#}</p>
                <p class="mt-2 text-gray-500">Referente informático</p>
            </div>

            <!-- Detalle y botón -->
            <div class="mt-12 mb-6 flex flex-col items-center px-6 text-center">
                <p class="text-gray-600 font-light">{#{ user.detalle }#}</p>
                <a href="{{ path('edit_profile', { 'id': user.id }) }}">
                <button class="mb-20 mt-4 focus:outline-none text-white bg-orange-500 hover:bg-orange-700 focus:ring-4 focus:ring-orange-300 font-medium rounded-lg text-sm px-5 py-2.5">
                    Editar mi perfil
                </button>
                </a>
            </div>
            </div>
        </div>
    </section>


    <!-- Fin de formulario de registro de usuario -->
    <script>
    document.getElementById('{{ registrationForm.imageProfile.vars.id }}').addEventListener('change', function (e) {
        const preview = document.getElementById('image-preview');
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (event) {
                preview.src = event.target.result;
                preview.classList.remove('hidden');
            };
            reader.readAsDataURL(file);
        }
    });

    document.addEventListener('DOMContentLoaded', () => {
    // Obtener todos los botones con la clase .toggle-password
    document.querySelectorAll('.toggle-password').forEach(button => {
        button.addEventListener('click', () => {
        // Obtener el ID objetivo del atributo data-target
        const targetId = button.getAttribute('data-target');
        const input = document.getElementById(targetId);
        
        // Verificar que el input existe antes de intentar cambiar el tipo
        if (input) {
            // Cambiar el tipo del input entre 'password' y 'text'
            input.type = input.type === 'password' ? 'text' : 'password';
        }
        });
    });
    });

</script>

{% endblock %}